---
authors: Nahum Shalman <nahum.shalman@mnx.io>
state: draft
---

# RFD 187 AI Contributions to Triton

## Definitions of Terms

AI - Artificial Intelligence. In this document this term will be used to refer to "generative AI" such
as large language models (LLMs). Commercial examples include ChatGPT from OpenAI and Claude from Anthropic.
This document intends to cover both use of commercially available tools as well as locally run ones (e.g.
running a Llama model using ollama).

## Problem statement

If we allow contributions to our repositories that were produced using AI tools, we believe
that we need to keep track of them. While many of these tools will credit themselves in commit
messages, our squash-and-merge processes in many of our repos mean we need a plan for how
to preserve that attribution in the commits that land on our production branches.

## Proposed Solution

### Attribution

- The unit of work that we land is a peer-reviewed GitHub pull request.
- Only humans count as peer reviewers for approving and merging pull requests.
- A human proposing a PR with AI generated content is expected to fully understand that content and must review it with extra scrutiny for correctness, security, and adherence to project standards.
- A PR with ANY AI generated content MUST credit the AI tool(s) used, regardless of the size or significance of the contribution.
- For repositories where branches are merged preserving the original commits
  - Commits where the tool credits itself as co-author are great.
  - If the commit message is being written by a human, make sure to credit the tool appropriately.
- For repositories where we "squash and merge" down to a single commit
  - The applied commit message MUST contain an attribution line. We will use `Portions generated by: ` followed by
    an appropriate attribution.
  - For tools with standardized name and email-addresses, e.g. Claude Code, we will use the string the tool uses.
    - `Claude <noreply@anthropic.com>`
  - For tools without standard attribution formats, use the tool name and version when available.
    Examples could include: `ChatGPT-4`,  `ollama/llama3.1`, `GitHub Copilot`, etc.
- For the sake of consistency, ALL commits MUST have a human git `Author`

### Acceptable Use

- Generating unit tests
- Generating documentation
- Translating existing code from one language to another

**Development Support:**
- Generating boilerplate code (e.g., struct definitions, basic CRUD operations)
- Creating mock data or fixtures for testing
- Generating configuration file templates
- Writing repetitive code patterns (e.g., error handling, logging)

**Code Quality:**
- Refactoring existing code for readability (with human review)
- Adding error handling to existing functions
- Generating code comments and inline documentation
- Creating example usage code for APIs or libraries

**Analysis and Debugging:**
- Generating debugging scripts or diagnostic tools
- Creating log parsing utilities
- Writing code analysis scripts (linting rules, metrics collection)
- Generating sample reproduction cases for bugs

**Maintenance:**
- Updating deprecated API usage patterns
- Converting between data formats
- Creating migration utilities for data structure changes
- Generating compatibility shims

### Legal and Licensing Considerations

**Licensing Compatibility:**
- AI-generated code may not have clear copyright ownership
- Ensure AI-generated content is compatible with existing project licenses
- Some licenses may require specific attribution or have restrictions on derivative works

**Intellectual Property:**
- AI models trained on copyrighted code could potentially reproduce similar patterns
- Risk of inadvertent copyright infringement through AI suggestions
- Patent implications for AI-generated implementations

**Liability:**
- Contributors remain responsible for AI-generated code that causes issues
- Standard warranty and indemnification considerations apply
- Insurance implications should be considered for AI-assisted development

**Compliance:**
- Some industries or contracts may prohibit or restrict AI-generated code
- Export control considerations for AI-generated cryptographic implementations
- Data sovereignty issues if AI tools process sensitive information

**Recommendation:** Consult with legal counsel when in doubt about AI-generated content, particularly for security-critical components or when working under specific contractual obligations.

### Unacceptable Use

**Security/Safety:**
- Generating cryptographic implementations, key generation, or security-critical code
- Code that handles authentication, authorization, or access control
- Network security protocols or firewall rules

**Legal/Compliance:**
- Code that could infringe on patents or copyrights
- Generating entire functions/modules that might be substantially similar to existing copyrighted code
- Code that processes personal data without proper privacy considerations

**Quality/Reliability:**
- Production database migration scripts or schema changes
- Code that directly manipulates critical system state without human review
- Performance-critical code paths without benchmarking/validation

**Architectural:**
- Core system architecture decisions (API design, data models, etc.)
- Code that establishes new dependencies or external integrations
- Changes to build systems, CI/CD pipelines, or deployment processes

**Context-Specific:**
- Code that requires deep domain knowledge of Triton's specific architecture
- Modifications to existing complex algorithms without understanding the original intent
- Code that interfaces with hardware or low-level system components

### Examples

- Commit message of a human crediting Claude: https://github.com/TritonDataCenter/triton-moirai/pull/4/commits/36ee26c3700cc74aa730489abc1779b0de724c01
```
commit 36ee26c3700cc74aa730489abc1779b0de724c01
Author: Nahum Shalman <nahum.shalman@mnx.io>
Date:   Thu May 8 09:34:27 2025 -0400

    TRITON-2478: Translate from javascript to rust

    Claude Sonnet was used to assist with the porting.
```

- Commit from Claude: https://github.com/TritonDataCenter/triton-moirai/pull/4/commits/87d42eb21886ae2ad9877621bd1144a975ae40db
```
commit 87d42eb21886ae2ad9877621bd1144a975ae40db
Author: Nahum Shalman <nahum.shalman@mnx.io>
Date:   Tue Jun 10 17:29:52 2025 +0000

    Refactor service types: replace confusing 'httpss' with clearer naming

    - Replace 'httpss' with 'https' (HTTPS frontend â†’ HTTPS backend, TLS bridging)
    - Replace 'https' with 'https-http' (HTTPS frontend â†’ HTTP backend, TLS termination)
    - Restore 'https' to its original meaning of end-to-end HTTPS
    - Update all method implementations (backend_ssl, frontend_ssl, use_sticky_session)
    - Update comprehensive documentation in code comments and README
    - Modernize tests to dynamically calculate cookie keys for robustness
    - All tests pass and code quality checks succeed

    The new naming explicitly shows frontendâ†’backend protocol mapping,
    making service configurations self-documenting and intuitive.

    ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

    Co-Authored-By: Claude <noreply@anthropic.com>
```

- Squashed commits from Claude with model details added manually: https://github.com/TritonDataCenter/triton-moirai/pull/4/commits/dd12c0a18b2334fc56926d29659c7923d3c68c63
```
commit dd12c0a18b2334fc56926d29659c7923d3c68c63
Author: Nahum Shalman <nahum.shalman@mnx.io>
Date:   Fri May 30 16:25:57 2025 +0000

    TRITON-2478: Add JSON-like syntax for HAProxy health check configuration

    Implement inline health check parameter syntax using JSON-like format:
    {check:/healthz,port:32150,rise:30,fall:1}. This allows users to
    configure health check endpoints, ports, and rise/fall counts directly
    in service definitions while maintaining backward compatibility.
    Code changes authored using Opus for $3.67

    Enhance both inline code documentation and README with detailed explanations
    of the JSON-like health check syntax introduced in the previous commit.
    Includes parameter descriptions, usage examples, and integration guidance.
    Documentation changes authored using Sonnet for $0.61

    ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

    Co-Authored-By: Claude <noreply@anthropic.com>
```

- Example of a commit message for a squashed commit where Claude was used:

```
commit 8250b359dc7b130b978fcc619bbbec989df13806
Author: Nahum Shalman <nahum.shalman@mnx.io>
Date:   Wed Jun 18 12:09:59 2025 -0400

    TRITON-XXXX: Subject from JIRA Ticket

    Portions generated by: Claude <noreply@anthropic.com>
    Reviewed by: Dan McDonald <danmcd@mnx.io>
    Approved by: Dan McDonald <danmcd@mnx.io>
```

#### Counter Example

> [!WARNING]
Even though the following commit would be fine when viewed on GitHub or when looking at the detailed commit information,
it would obscure the responsible human in plain `git log` output.

> [!WARNING]
Commit from Claude with Claude as `Author`: https://github.com/TritonDataCenter/rfd/commit/a75057c51b8515eb153105ad133b7df7dcee5b3e
```
### --- THIS IS A COUNTER EXAMPLE --- ###
$ git log -n 1 --pretty=fuller a7505
commit a75057c51b8515eb153105ad133b7df7dcee5b3e
Author:     Claude <noreply@anthropic.com>
AuthorDate: Wed Jun 18 12:41:31 2025 -0400
Commit:     Nahum Shalman <nahum.shalman@mnx.io>
CommitDate: Wed Jun 18 12:42:24 2025 -0400
<snip>
### --- THIS IS A COUNTER EXAMPLE --- ###
```

## References

- https://simonwillison.net/2025/Feb/3/a-computer-can-never-be-held-accountable/
```
         A COMPUTER
CAN NEVER BE HELD ACCOUNTABLE

THEREFORE A COMPUTER MUST NEVER
   MAKE A MANAGEMENT DECISION
```

